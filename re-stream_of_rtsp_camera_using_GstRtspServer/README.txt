------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
README: Multi-Camera RTSP Compositor and RTSP Re-Streamer
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Overview:->

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
################################################################################################################################################################################################################################################################################################
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

The Multi-Camera RTSP Compositor and RTSP Re-Streamer application:

    1. Streams multiple RTSP camera feeds.
    2. Composites the feeds into a grid layout for local display.
    3. Re-streams the composited output via an internal RTSP server.
    
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
################################################################################################################################################################################################################################################################################################
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

This tool is built using GStreamer and is configurable via a config.ini file.

Features:->

   1. Dynamic RTSP Camera Integration:
        - Supports multiple RTSP camera sources.
        - Customizable grid layout with adjustable tile sizes.
   2. Local Display:
        - Composited stream displayed on the local screen.
   3. RTSP Re-Streaming:
        - Publishes the composited output as an RTSP stream.
   4. Customizable Encoding:
        - Supports H.265 encoding with adjustable bitrate.
   5. Configurable via config.ini:
        - Easily specify camera URLs, grid dimensions, RTSP server settings, and encoding parameters.

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
################################################################################################################################################################################################################################################################################################
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Configuration:->

Create a config.ini file in the same directory as the script with the following structure:
Example config.ini

[resources]
camera1 = rtsp://username:password@192.168.1.101
camera2 = rtsp://username:password@192.168.1.102
camera3 = rtsp://username:password@192.168.1.103

[grid]
rows = 2
columns = 2

[stream]
rtsp_host = 127.0.0.1
rtsp_port = 8554
mount_point = /multicam
udp_port = 5400
tile_width = 640
tile_height = 360
encoding_bitrate = 2000000

    1. [resources]: Add RTSP camera URLs.
    2. [grid]:
         rows: Number of rows in the grid.
         columns: Number of columns in the grid.
    3. [stream]:
         rtsp_host: Host IP for the RTSP server.
         rtsp_port: Port for the RTSP server.
         mount_point: Mount point for accessing the RTSP stream.
         udp_port: UDP port used internally for the stream.
         tile_width and tile_height: Dimensions of each camera tile.
         encoding_bitrate: Bitrate for the H.265 encoded stream.

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
################################################################################################################################################################################################################################################################################################
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Running the Application:->

    Place the config.ini file in the same directory as the script.
    Run the Python script:

    	$ python3 multicamera_rtsp_compositor.py

Workflow:->

   1. Initialization:
        Reads configuration from the config.ini file.
        Builds a dynamic GStreamer pipeline for the specified cameras and layout.

   2. Grid Layout:
        Arranges camera feeds in a grid layout using nvcompositor.
        Each tile displays a text overlay with the camera number and IP address.

   3. Local Display and Re-Streaming:
        Streams the composited output locally using nv3dsink.
        Encodes the composited stream as H.265 and re-streams it via an RTSP server.

   4. Accessing the RTSP Stream:
        The re-streamed output is available at:

        rtsp://<rtsp_host>:<rtsp_port><mount_point>

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
################################################################################################################################################################################################################################################################################################
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Example

For the provided config.ini file:

    -> Grid Layout:
         A 2x2 grid for 3 cameras.
         Each tile is 640x360.
    -> RTSP Stream:
         Available at: rtsp://127.0.0.1:8554/multicam.

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
################################################################################################################################################################################################################################################################################################
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Known Issues and Troubleshooting

   1. No Cameras Detected:
        Ensure camera URLs in the config.ini are valid and accessible.
   2. Pipeline Errors:
        Verify that all required GStreamer plugins are installed.
   3. High Latency:
        Adjust the latency parameter in the pipeline to a lower value.
     
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
################################################################################################################################################################################################################################################################################################
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


